<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<div layout:fragment="content">
  <h1>Summary</h1>

  <p th:text="${bookingSummary.guest.firstName} + ' '  + ${bookingSummary.guest.lastName}  + ', ' + ${bookingSummary.guest.birthDate}"></p>
  <p th:text="'Check in date: ' + ${bookingSummary.checkInDate}"></p>
  <p th:text="'Check out date: ' + ${bookingSummary.checkOutDate}"></p>

  <table class="table table-striped">
    <thead>
    <tr>
      <th>Name</th>
      <th>Price</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="service : ${bookingSummary.services}">
      <td th:text="${service.name}"></td>
      <td th:text="${service.price} + 'â‚¬'"></td>
    </tr>
    </tbody>
  </table>

  <table class="table table-striped">
    <thead>
    <tr>
      <th>Name</th>
      <th>Amount</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="category : ${bookingSummary.categoriesWithAmounts}" th:if="${category.value != 0}">
      <td th:text="${category.key.name}"></td>
      <td th:text="${category.value}"></td>
    </tr>
    </tbody>
  </table>

  <div th:if="${isCreated}" class="alert alert-success" role="alert">
    Booking successfully created!
  </div>
  <div th:if="${isCheckIn}">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalRoomNumber">Check In</button>
  </div>

<!-- Modal -->
  <div class="modal fade" id="modalRoomNumber" tabindex="-1" role="dialog" aria-labelledby="modalRoomNumberLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalRoomNumberLabel">Room Number</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Fill Room Number here
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <a href="/" class="btn btn-primary">Back to Main Menu</a>
        </div>
      </div>
    </div>
  </div>


  <form th:if="${!isCreated && !isCheckIn}" action="/createbooking" method="post" th:object="${form}">
    <input type="hidden" id="guestId" name="guestId" th:field="*{guestId}" />
    <input type="hidden" id="serviceId" name="serviceId" th:field="*{serviceIds}" />
    <input type="hidden" id="roomCategoryId" name="roomCategoryId" th:field="*{roomCategoryIds}" />
    <input type="hidden" id="amounts" name="amounts" th:field="*{amounts}" />
    <input type="hidden" id="checkInDate" name="checkInDate" th:field="*{checkInDate}" />
    <input type="hidden" id="checkOutDate" name="checkOutDate" th:field="*{checkOutDate}" />
    <button id="next-button" type="submit" class="btn btn-primary">Create booking</button>
  </form>
  <a class="btn btn-primary" th:if="${isCreated}" href="/">Back to main menu</a>

</div>
</body>
</html>